var currentTool="appicon",quality=.92,android_round=.1754,isDownloadZip=!0,downloadFiles=[],imgobj=new Image;function init(){document.addEventListener("drop",function(e){e.preventDefault()},!1),document.addEventListener("dragover",function(e){e.preventDefault()},!1),window.addEventListener("load",function(){var e=document.getElementsByClassName("needs-validation");Array.prototype.filter.call(e,function(i){i.addEventListener("submit",function(e){!1===i.checkValidity()&&(e.preventDefault(),e.stopPropagation(),i.classList.add("was-validated"))},!1)})},!1),document.getElementById("ionic-project").addEventListener("change",function(e){document.getElementById("android-folder-select").disabled=this.checked},!1),document.getElementById("android-ul-check").addEventListener("change",function(e){for(var i=document.querySelectorAll("#android-ul input:not(#android-ul-check), #android-ul button"),n=0;n<i.length;n++){i[n].disabled=!this.checked}},!1),document.getElementById("ios-ul-check").addEventListener("change",function(e){for(var i=document.querySelectorAll("#ios-ul input:not(#ios-ul-check), #ios-ul button"),n=0;n<i.length;n++){i[n].disabled=!this.checked}},!1),"appicon"==currentTool?(document.querySelector(".appicon-nav").classList.add("active"),document.querySelector(".appsplash-nav").classList.remove("active"),document.getElementById("android-rounded").addEventListener("change",function(e){document.getElementById("android-border-radius").disabled=!this.checked,android_round=this.checked?document.getElementById("android-border-radius").value:0,(isNaN(android_round)||android_round<0)&&(android_round=0),document.getElementById("icon-preview").style.setProperty("border-radius",android_round+"%")},!1),document.getElementById("android-border-radius").addEventListener("change",function(e){android_round=document.getElementById("android-rounded").checked?this.value:0,(isNaN(android_round)||android_round<0)&&(android_round=0),document.getElementById("icon-preview").style.setProperty("border-radius",android_round+"%")},!1),hideElement(".only-splash")):(document.querySelector(".appicon-nav").classList.remove("active"),document.querySelector(".appsplash-nav").classList.add("active"),android_round=0,hideElement(".android-rounded-form"),hideElement("#icon-preview"),hideElement(".only-icon"));for(var e="",i="",n=getOptionListData("android",currentTool),a=0;a<n.length;a++){e+=createOptionItem(n[a])}n=getOptionListData("ios",currentTool);for(a=0;a<n.length;a++){i+=createOptionItem(n[a])}document.querySelector("#android-ul ul.icon-ul").innerHTML=e,document.querySelector("#ios-ul ul.icon-ul").innerHTML=i}function switchTool(e){window.location.href=window.location.href.split("?")[0]+"?tool="+e}function hideElement(e){for(var i=document.querySelectorAll(e),n=0;n<i.length;n++){i[n].style.setProperty("display","none")}}function showElement(e,i){i=void 0===i?"block":i;for(var n=document.querySelectorAll(e),a=0;a<n.length;a++){n[a].style.setProperty("display",i)}}function getQueryParamVal(e){if(window.location.search.length<=0)return"";var i=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),n=window.location.search.substr(1).match(i);return null!=n?decodeURIComponent(n[2]):""}function fileChange(e){e.target&&e.target.files&&0<e.target.files.length&&showImage(e.target.files[0])}function dropfile(e){e.dataTransfer&&e.dataTransfer.files&&showImage(e.dataTransfer.files.item(0))}function showSafeArea(){var e,i;"appsplash"==currentTool&&(e=document.getElementsByClassName("preimg")[0],"block"==(i=document.getElementById("safe-area")).style.display||0==e.width?i.style.display="none":(i.style.display="block",i.style.marginLeft=Math.round(106.92)+"px"))}function showImage(e){var i,n=e.type;e.size;0==n.indexOf("image/")&&((i=new FileReader).readAsDataURL(e),i.onload=function(e){var i=document.getElementById("ImgCon");i.innerHTML="",document.getElementById("previewdiv").style.setProperty("display","block"),i.innerHTML='<img class="preimg" src="'+e.target.result+'">',imgobj.src=e.target.result,document.getElementById("icon-preview").src=e.target.result,document.getElementById("icon-preview").style.setProperty("background-color","#fff")})}function filterUL(e,i){for(var n="ANDROID"==e?"#android-ul ul>li input[type=checkbox]":"#ios-ul ul>li input[type=checkbox]",a=document.querySelectorAll(n),t=0;t<a.length;t++){var o=a[t];"ALL"==i||0<=o.getAttribute("data-filter").indexOf(i)?o.checked=!0:o.checked=!1}}function getOptionListData(e,i){return{android_appicon:[{id:"aai_1",title:"ldpi-icon",ionicfilename:"android\\icon\\drawable-ldpi-icon",filename:"android\\mipmap-ldpi\\ic_launcher",subtype:"",size:"36x36",filetype:"png",checked:!0,iscustom:!1},{id:"aai_2",title:"mdpi-icon",ionicfilename:"android\\icon\\drawable-mdpi-icon",filename:"android\\mipmap-mdpi\\ic_launcher",subtype:"",size:"48x48",filetype:"png",checked:!0,iscustom:!1},{id:"aai_3",title:"hdpi-icon",ionicfilename:"android\\icon\\drawable-hdpi-icon",filename:"android\\mipmap-hdpi\\ic_launcher",subtype:"",size:"72x72",filetype:"png",checked:!0,iscustom:!1},{id:"aai_4",title:"xhdpi-icon",ionicfilename:"android\\icon\\drawable-xhdpi-icon",filename:"android\\mipmap-xhdpi\\ic_launcher",subtype:"",size:"96x96",filetype:"png",checked:!0,iscustom:!1},{id:"aai_5",title:"xxhdpi-icon",ionicfilename:"android\\icon\\drawable-xxhdpi-icon",filename:"android\\mipmap-xxhdpi\\ic_launcher",subtype:"",size:"144x144",filetype:"png",checked:!0,iscustom:!1},{id:"aai_6",title:"xxxhdpi-icon",ionicfilename:"android\\icon\\drawable-xxxhdpi-icon",filename:"android\\mipmap-xxxhdpi\\ic_launcher",subtype:"",size:"192x192",filetype:"png",checked:!0,iscustom:!1},{id:"aai_7",title:"icon-512",ionicfilename:"android\\icon-512",filename:"android\\icon-512",subtype:"",size:"512x512",filetype:"png",checked:!0,iscustom:!1},{id:"aai_8",title:"icon-512-squared",ionicfilename:"android\\icon-512-squared",filename:"android\\icon-512-squared",subtype:"",size:"512x512",filetype:"png",checked:!0,iscustom:!1}],ios_appicon:[{id:"iai_1",title:"icon",ionicfilename:"ios\\icon\\icon",filename:"ios\\AppIcon.appiconset\\icon",subtype:"iphone",size:"57x57",filetype:"png",checked:!0,iscustom:!1},{id:"iai_2",title:"icon@2x",ionicfilename:"ios\\icon\\icon@2x",filename:"ios\\AppIcon.appiconset\\icon@2x",subtype:"iphone",size:"114x114",filetype:"png",checked:!0,iscustom:!1},{id:"iai_21",title:"icon-20",ionicfilename:"ios\\icon\\icon-20",filename:"ios\\AppIcon.appiconset\\icon-20",subtype:"iphone",size:"20x20",filetype:"png",checked:!0,iscustom:!1},{id:"iai_3",title:"icon-40",ionicfilename:"ios\\icon\\icon-40",filename:"ios\\AppIcon.appiconset\\icon-40",subtype:"iphone",size:"40x40",filetype:"png",checked:!0,iscustom:!1},{id:"iai_4",title:"icon-40@2x",ionicfilename:"ios\\icon\\icon-40@2x",filename:"ios\\AppIcon.appiconset\\icon-40@2x",subtype:"iphone",size:"80x80",filetype:"png",checked:!0,iscustom:!1},{id:"iai_5",title:"icon-40@3x",ionicfilename:"ios\\icon\\icon-40@3x",filename:"ios\\AppIcon.appiconset\\icon-40@3x",subtype:"iphone",size:"120x120",filetype:"png",checked:!0,iscustom:!1},{id:"iai_6",title:"icon-50",ionicfilename:"ios\\icon\\icon-50",filename:"ios\\AppIcon.appiconset\\icon-50",subtype:"iphone",size:"50x50",filetype:"png",checked:!0,iscustom:!1},{id:"iai_7",title:"icon-50@2x",ionicfilename:"ios\\icon\\icon-50@2x",filename:"ios\\AppIcon.appiconset\\icon-50@2x",subtype:"iphone",size:"100x100",filetype:"png",checked:!0,iscustom:!1},{id:"iai_8",title:"icon-60",ionicfilename:"ios\\icon\\icon-60",filename:"ios\\AppIcon.appiconset\\icon-60",subtype:"iphone",size:"60x60",filetype:"png",checked:!0,iscustom:!1},{id:"iai_9",title:"icon-60@2x",ionicfilename:"ios\\icon\\icon-60@2x",filename:"ios\\AppIcon.appiconset\\icon-60@2x",subtype:"iphone",size:"120x120",filetype:"png",checked:!0,iscustom:!1},{id:"iai_10",title:"icon-60@3x",ionicfilename:"ios\\icon\\icon-60@3x",filename:"ios\\AppIcon.appiconset\\icon-60@3x",subtype:"iphone",size:"180x180",filetype:"png",checked:!0,iscustom:!1},{id:"iai_11",title:"icon-72",ionicfilename:"ios\\icon\\icon-72",filename:"ios\\AppIcon.appiconset\\icon-72",subtype:"iphone",size:"72x72",filetype:"png",checked:!0,iscustom:!1},{id:"iai_12",title:"icon-72@2x",ionicfilename:"ios\\icon\\icon-72@2x",filename:"ios\\AppIcon.appiconset\\icon-72@2x",subtype:"iphone",size:"144x144",filetype:"png",checked:!0,iscustom:!1},{id:"iai_13",title:"icon-76",ionicfilename:"ios\\icon\\icon-76",filename:"ios\\AppIcon.appiconset\\icon-76",subtype:"iphone",size:"76x76",filetype:"png",checked:!0,iscustom:!1},{id:"iai_14",title:"icon-76@2x",ionicfilename:"ios\\icon\\icon-76@2x",filename:"ios\\AppIcon.appiconset\\icon-76@2x",subtype:"iphone",size:"152x152",filetype:"png",checked:!0,iscustom:!1},{id:"iai_15",title:"icon-83.5@2x",ionicfilename:"ios\\icon\\icon-83.5@2x",filename:"ios\\AppIcon.appiconset\\icon-83.5@2x",subtype:"iphone",size:"167x167",filetype:"png",checked:!0,iscustom:!1},{id:"iai_16",title:"icon-small",ionicfilename:"ios\\icon\\icon-small",filename:"ios\\AppIcon.appiconset\\icon-small",subtype:"iphone",size:"29x29",filetype:"png",checked:!0,iscustom:!1},{id:"iai_17",title:"icon-small@2x",ionicfilename:"ios\\icon\\icon-small@2x",filename:"ios\\AppIcon.appiconset\\icon-small@2x",subtype:"iphone",size:"58x58",filetype:"png",checked:!0,iscustom:!1},{id:"iai_18",title:"icon-small@3x",ionicfilename:"ios\\icon\\icon-small@3x",filename:"ios\\AppIcon.appiconset\\icon-small@3x",subtype:"iphone",size:"87x87",filetype:"png",checked:!0,iscustom:!1},{id:"iai_19",title:"icon-1024",ionicfilename:"ios\\icon\\icon-1024",filename:"ios\\AppIcon.appiconset\\icon-1024",subtype:"iphone",size:"1024x1024",filetype:"jpg",checked:!0,iscustom:!1},{id:"iai_20",title:"AppIcon24x24@2x",ionicfilename:"ios\\icon\\AppIcon24x24@2x",filename:"ios\\AppIcon.appiconset\\AppIcon24x24@2x",subtype:"watch",size:"48x48",filetype:"png",checked:!0,iscustom:!1},{id:"iai_21",title:"AppIcon27.5x27.5@2x",ionicfilename:"ios\\icon\\AppIcon27.5x27.5@2x",filename:"ios\\AppIcon.appiconset\\AppIcon27.5x27.5@2x",subtype:"watch",size:"55x55",filetype:"png",checked:!0,iscustom:!1},{id:"iai_22",title:"AppIcon29x29@2x",ionicfilename:"ios\\icon\\AppIcon29x29@2x",filename:"ios\\AppIcon.appiconset\\AppIcon29x29@2x",subtype:"watch",size:"58x58",filetype:"png",checked:!0,iscustom:!1},{id:"iai_23",title:"AppIcon29x29@3x",ionicfilename:"ios\\icon\\AppIcon29x29@3x",filename:"ios\\AppIcon.appiconset\\AppIcon29x29@3x",subtype:"watch",size:"87x87",filetype:"png",checked:!0,iscustom:!1},{id:"iai_24",title:"AppIcon40x40@2x",ionicfilename:"ios\\icon\\AppIcon40x40@2x",filename:"ios\\AppIcon.appiconset\\AppIcon40x40@2x",subtype:"watch",size:"80x80",filetype:"png",checked:!0,iscustom:!1},{id:"iai_25",title:"AppIcon44x44@2x",ionicfilename:"ios\\icon\\AppIcon44x44@2x",filename:"ios\\AppIcon.appiconset\\AppIcon44x44@2x",subtype:"watch",size:"88x88",filetype:"png",checked:!0,iscustom:!1},{id:"iai_26",title:"AppIcon86x86@2x",ionicfilename:"ios\\icon\\AppIcon86x86@2x",filename:"ios\\AppIcon.appiconset\\AppIcon86x86@2x",subtype:"watch",size:"172x172",filetype:"png",checked:!0,iscustom:!1},{id:"iai_27",title:"AppIcon98x98@2x",ionicfilename:"ios\\icon\\AppIcon98x98@2x",filename:"ios\\AppIcon.appiconset\\AppIcon98x98@2x",subtype:"watch",size:"196x196",filetype:"png",checked:!0,iscustom:!1}],android_appsplash:[{id:"aas_1",title:"port-ldpi",ionicfilename:"android\\splash\\drawable-port-ldpi-screen",filename:"android\\drawable-port-ldpi\\screen",subtype:"port",size:"240x320",filetype:"png",checked:!0,iscustom:!1},{id:"aas_2",title:"port-mdpi",ionicfilename:"android\\splash\\drawable-port-mdpi-screen",filename:"android\\drawable-port-mdpi\\screen",subtype:"port",size:"320x480",filetype:"png",checked:!0,iscustom:!1},{id:"aas_3",title:"port-hdpi",ionicfilename:"android\\splash\\drawable-port-hdpi-screen",filename:"android\\drawable-port-hdpi\\screen",subtype:"port",size:"480x800",filetype:"png",checked:!0,iscustom:!1},{id:"aas_4",title:"port-xhdpi",ionicfilename:"android\\splash\\drawable-port-xhdpi-screen",filename:"android\\drawable-port-xhdpi\\screen",subtype:"port",size:"720x1280",filetype:"png",checked:!0,iscustom:!1},{id:"aas_5",title:"port-xxhdpi",ionicfilename:"android\\splash\\drawable-port-xxhdpi-screen",filename:"android\\drawable-port-xxhdpi\\screen",subtype:"port",size:"960x1600",filetype:"png",checked:!0,iscustom:!1},{id:"aas_6",title:"port-xxxhdpi",ionicfilename:"android\\splash\\drawable-port-xxxhdpi-screen",filename:"android\\drawable-port-xxxhdpi\\screen",subtype:"port",size:"1280x1920",filetype:"png",checked:!0,iscustom:!1},{id:"aas_7",title:"land-ldpi",ionicfilename:"android\\splash\\drawable-land-ldpi-screen",filename:"android\\drawable-land-ldpi\\screen",subtype:"land",size:"320x240",filetype:"png",checked:!1,iscustom:!1},{id:"aas_8",title:"land-mdpi",ionicfilename:"android\\splash\\drawable-land-mdpi-screen",filename:"android\\drawable-land-mdpi\\screen",subtype:"land",size:"480x320",filetype:"png",checked:!1,iscustom:!1},{id:"aas_9",title:"land-hdpi",ionicfilename:"android\\splash\\drawable-land-hdpi-screen",filename:"android\\drawable-land-hdpi\\screen",subtype:"land",size:"800x480",filetype:"png",checked:!1,iscustom:!1},{id:"aas_10",title:"land-xhdpi",ionicfilename:"android\\splash\\drawable-land-xhdpi-screen",filename:"android\\drawable-land-xhdpi\\screen",subtype:"land",size:"1280x720",filetype:"png",checked:!1,iscustom:!1},{id:"aas_11",title:"land-xxhdpi",ionicfilename:"android\\splash\\drawable-land-xxhdpi-screen",filename:"android\\drawable-land-xxhdpi\\screen",subtype:"land",size:"1600x960",filetype:"png",checked:!1,iscustom:!1},{id:"aas_12",title:"land-xxxhdpi",ionicfilename:"android\\splash\\drawable-land-xxxhdpi-screen",filename:"android\\drawable-land-xxxhdpi\\screen",subtype:"land",size:"1920x1280",filetype:"png",checked:!1,iscustom:!1}],ios_appsplash:[{id:"ias_1",title:"Default@2x~iphone",ionicfilename:"ios\\splash\\Default@2x~iphone",filename:"ios\\LaunchImage.launchimage\\Default@2x~iphone",subtype:"port",size:"640x960",filetype:"png",checked:!0,iscustom:!1},{id:"ias_3",title:"Default~iphone",ionicfilename:"ios\\splash\\Default~iphone",filename:"ios\\LaunchImage.launchimage\\Default~iphone",subtype:"port",size:"320x480",filetype:"png",checked:!0,iscustom:!1},{id:"ias_4",title:"Default-568h@2x~iphone",ionicfilename:"ios\\splash\\Default-568h@2x~iphone",filename:"ios\\LaunchImage.launchimage\\Default-568h@2x~iphone",subtype:"port",size:"640x1136",filetype:"png",checked:!0,iscustom:!1},{id:"ias_5",title:"Default-667h",ionicfilename:"ios\\splash\\Default-667h",filename:"ios\\LaunchImage.launchimage\\Default-667h",subtype:"port",size:"750x1334",filetype:"png",checked:!0,iscustom:!1},{id:"ias_6",title:"Default-736h",ionicfilename:"ios\\splash\\Default-736h",filename:"ios\\LaunchImage.launchimage\\Default-736h",subtype:"port",size:"1125x2436",filetype:"png",checked:!0,iscustom:!1},{id:"ias_7",title:"Default-2208h",ionicfilename:"ios\\splash\\Default-2208h",filename:"ios\\LaunchImage.launchimage\\Default-2208h",subtype:"port",size:"1242x2208",filetype:"png",checked:!0,iscustom:!1},{id:"ias_8",title:"Default@2x~universal~anyany",ionicfilename:"ios\\splash\\Default@2x~universal~anyany",filename:"ios\\LaunchImage.launchimage\\Default@2x~universal~anyany",subtype:"port|land",size:"2732x2732",filetype:"png",checked:!0,iscustom:!1},{id:"ias_2",title:"Default@3x~universal~anyany",ionicfilename:"ios\\splash\\Default@3x~universal~anyany",filename:"ios\\LaunchImage.launchimage\\Default@3x~universal~anyany",subtype:"port|land",size:"2208x2208",filetype:"png",checked:!0,iscustom:!1},{id:"ias_10",title:"Default-Landscape@2x~iphone",ionicfilename:"ios\\splash\\Default-Landscape@2x~iphone",filename:"ios\\LaunchImage.launchimage\\Default-Landscape@2x~iphone",subtype:"land",size:"960x640",filetype:"png",checked:!1,iscustom:!1},{id:"ias_11",title:"Default-Landscape~iphone",ionicfilename:"ios\\splash\\Default-Landscape~iphone",filename:"ios\\LaunchImage.launchimage\\Default-Landscape~iphone",subtype:"land",size:"480x320",filetype:"png",checked:!1,iscustom:!1},{id:"ias_12",title:"Default-Landscape-568h@2x~iphone",ionicfilename:"ios\\splash\\Default-Landscape-568h@2x~iphone",filename:"ios\\LaunchImage.launchimage\\Default-Landscape-568h@2x~iphone",subtype:"land",size:"1136x640",filetype:"png",checked:!1,iscustom:!1},{id:"ias_13",title:"Default-Landscape-667h",ionicfilename:"ios\\splash\\Default-Landscape-667h",filename:"ios\\LaunchImage.launchimage\\Default-Landscape-667h",subtype:"land",size:"1334x750",filetype:"png",checked:!1,iscustom:!1},{id:"ias_14",title:"Default-Landscape-736h",ionicfilename:"ios\\splash\\Default-Landscape-736h",filename:"ios\\LaunchImage.launchimage\\Default-Landscape-736h",subtype:"land",size:"2436x1125",filetype:"png",checked:!1,iscustom:!1},{id:"ias_15",title:"Default-Landscape-2208h",ionicfilename:"ios\\splash\\Default-Landscape-2208h",filename:"ios\\LaunchImage.launchimage\\Default-Landscape-2208h",subtype:"land",size:"2208x1242",filetype:"png",checked:!1,iscustom:!1}]}[e+"_"+i].concat(getLocalCustomOptions(e,i))}function createOptionItem(e){return'<li class="list-group-item d-flex justify-content-between align-items-center"><div class="form-check"><input type="checkbox" class="form-check-input" id="'+e.id+'" data-filter="'+e.subtype+'" '+(e.checked?"checked":"")+'><label class="form-check-label" for="'+e.id+'">'+e.title+(e.iscustom?'(custom)<button type="button" class="btn btn-link" onclick="showDelCustomDlg(\''+e.id+'\')"><svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-trash" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z"/><path fill-rule="evenodd" d="M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4L4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z"/></svg></button>':"")+'</label></div><span class="badge badge-info badge-pill">'+e.size+"</span></li>"}function showAddCustomOptionDlg(e){document.getElementById("aom-platform").value=e,$("#addOptionModal").modal("show")}function addCustomOption(){var e,i,n,a,t,o,c,l,s=document.querySelector("#addOptionModal form");!1!==s.checkValidity()?(e=document.getElementById("aom-platform").value,i=document.getElementById("aom-title").value,n=document.getElementById("aom-filename").value,a=document.getElementById("aom-width").value,t=document.getElementById("aom-height").value,o=document.getElementById("aom-imgtype").value,l={id:e+"_cst_"+((c=document.querySelector("#"+e+"-ul ul.icon-ul")).getElementsByTagName("li").length+1),title:i,ionicfilename:n,filename:n,subtype:"",size:a+"x"+t,filetype:o,checked:!0,iscustom:!0},c.innerHTML+=createOptionItem(l),saveLocalCustomOption(l,e,currentTool),s.classList.remove("was-validated"),$("#addOptionModal").modal("hide")):s.classList.add("was-validated")}function showDelCustomDlg(e){document.getElementById("dcm-id").value=e,$("#deleteConfirmModal").modal("show")}function removeCustomOption(){if(localStorage){var e=document.getElementById("dcm-id").value;$("#deleteConfirmModal").modal("hide"),$("li:has(#"+e+")").remove();for(var i=0==e.indexOf("android")?"android":"ios",n=getLocalCustomOptions(i,currentTool),a=0;a<n.length;a++)if(e==n[a].id){n.splice(a,1);break}localStorage.setItem("mky_customoptions_"+i+"_"+currentTool,JSON.stringify(n))}}function getLocalCustomOptions(e,i){if(localStorage){var n=localStorage.getItem("mky_customoptions_"+e+"_"+i);if(n&&""!=n)try{return JSON.parse(n)}catch(e){}}return[]}function saveLocalCustomOption(e,i,n){var a;localStorage&&((a=getLocalCustomOptions(i,n)).push(e),localStorage.setItem("mky_customoptions_"+i+"_"+n,JSON.stringify(a)))}function getSettingOpts(){var e=document.getElementById("output-quality").value;return e<50?e=50:100<e&&(e=100),{tool:currentTool,isDownloadZip:isDownloadZip,quality:e/100,isIonicProject:document.getElementById("ionic-project").checked,android_icon_radius:android_round,zip_filename:currentTool+(new Date).getTime()+".zip"}}function build(){var e=document.getElementById("android-ul-check").checked,i=document.getElementById("ios-ul-check").checked;if(e||i){var n=getSettingOpts(),a=[];if(e)for(var t=getOptionListData("android",currentTool),o=document.querySelectorAll("#android-ul li input[type=checkbox]"),c=0;c<o.length;c++){(l=o[c]).checked&&(s=findItem(l.id,t),a.push(s),s.platform="android")}if(i)for(var l,s,d=getOptionListData("ios",currentTool),o=document.querySelectorAll("#ios-ul li input[type=checkbox]"),c=0;c<o.length;c++){(l=o[c]).checked&&(a.push(findItem(l.id,d)),s=findItem(l.id,d),a.push(s),s.platform="ios")}0!=a.length&&(1==a.length&&(n.isDownloadZip=!1),$("#loadingModal").modal("show"),downloadFiles=[],setTimeout(function(){for(var e=0;e<a.length;e++){var i=a[e];resizeImage(imgobj,i,n,currentTool),sleep(10)}n.isDownloadZip&&0<downloadFiles.length?downloadZipFiles(n.zip_filename):setTimeout(function(){$("#loadingModal").modal("hide")},300)},300))}}function findItem(e,i){for(var n=0;n<i.length;n++){var a=i[n];if(a.id==e)return a}return null}currentTool="appsplash"!=getQueryParamVal("tool")?"appicon":"appsplash",init();var canvas=null;function resizeImage(e,i,n,a){var t,o,c,l,s,d,p=i.size.split("x"),r=i.filetype,u=0<n.android_icon_radius&&"android"==i.platform,m=n.isIonicProject?i.ionicfilename:i.filename,h=+p[0],f=+p[1];null==canvas&&(canvas=document.createElement("canvas")),canvas.width=h,canvas.height=f,(y=canvas.getContext("2d")).clearRect(0,0,canvas.width,canvas.height),y.imageSmoothingQuality="high",u&&roundCanvas(y,canvas.width,canvas.height,Math.round(canvas.width*n.android_icon_radius/100)),"appicon"==a?y.drawImage(e,0,0,h,f):(d=s=0,(l=(t=e.width)/h)<(c=(o=e.height)/f)?(o=Math.round(l*f),d=Math.round((e.height-o)/2)):(t=Math.round(c*h),s=Math.round((e.width-t)/2)),y.drawImage(e,s,d,t,o,0,0,h,f));var g=canvas.toDataURL("jpg"==r?"image/jpeg":"image/png",n.quality),y=null;saveImageFile(g,m,r,n.isDownloadZip)}function saveImageFile(e,i,n,a){var t=i.split("\\"),o=t[t.length-1]+"."+n;a?(t.splice(t.length-1,1),e=e.replace("data:"+fixType(n)+";base64,",""),downloadFiles.push({path:t,filename:o,data:e,base64:!0})):saveFile(e=e.replace(fixType(n),"image/octet-stream"),o)}function downloadZipFiles(e){for(var i=new JSZip,n={},a=0;a<downloadFiles.length;a++){var t=downloadFiles[a];if(0==t.path.length)i.file(t.filename,t.data,{base64:t.base64});else{for(var o="",c=i,l=0;l<t.path.length;l++){var s=t.path[l];void 0===n[o+=(0<o.length?"\\":"")+s]?(c=c.folder(s),n[o]=c):c=n[o]}c.file(t.filename,t.data,{base64:t.base64})}}var d=e;i.generateAsync({type:"blob"}).then(function(e){filedata=URL.createObjectURL(e),saveFile(filedata,d),setTimeout(function(){$("#loadingModal").modal("hide")},300)})}function saveFile(e,i){var n=document.createElementNS("http://www.w3.org/1999/xhtml","a");n.href=e,n.download=i;var a=document.createEvent("MouseEvents");a.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),n.dispatchEvent(a)}function roundCanvas(e,i,n,a){e.beginPath(0),e.arc(i-a,n-a,a,0,Math.PI/2),e.lineTo(a,n),e.arc(a,n-a,a,Math.PI/2,Math.PI),e.lineTo(0,a),e.arc(a,a,a,Math.PI,3*Math.PI/2),e.lineTo(i-a,0),e.arc(i-a,a,a,3*Math.PI/2,2*Math.PI),e.lineTo(i,n-a),e.closePath(),e.clip()}function fixType(e){return"image/"+(e=e.toLowerCase().replace(/jpg/i,"jpeg")).match(/png|jpeg|bmp|gif/)[0]}var sleep=function(e){for(var i=(new Date).getTime()+parseInt(e,10);(new Date).getTime()<i;);};
